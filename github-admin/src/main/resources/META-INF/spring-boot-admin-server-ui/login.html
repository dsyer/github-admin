<!doctype html>
<html class="no-js">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Spring Boot Admin</title>
<meta name="description" content="">
<meta name="viewport" content="width=device-width">
<link rel="shortcut icon" type="image/x-icon" href="img/favicon.png" />
<link
	href="https://fonts.googleapis.com/css?family=Varela+Round|Montserrat:400,700"
	rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" />
<link rel="stylesheet" type="text/css" href="css/main.css" />
</head>
<body ng-app="springBootAdmin">
	<script type="text/javascript">
		// Work around Google font rendering issues in webkit browsers on Windows 7
		if (navigator.userAgent.indexOf("NT 6.1") != -1) {
			document.body.style.WebkitTextStroke = "0.5px";
		}
	</script>
	<div class="viewport">
		<header class="navbar header--navbar desktop-only">
			<div class="navbar-inner">
				<div class="container-fluid">
					<div class="spring-logo--container">
						<a class="spring-logo" href="#"><span></span></a>
					</div>
					<div class="spring-logo--container">
						<a class="spring-boot-logo" href="#"><span></span></a>
					</div>
				</div>
			</div>
		</header>
		<div class="main-body--wrapper" ng-controller="login as controller">
			<div class="container-fluid content">
				<div class="alert alert-danger" ng-show="controller.error">There
					was a problem logging in. Please try again.</div>
				<div class="alert alert-info" ng-show="controller.authenticated">Refreshing
					applications. Please wait...</div>
				<form role="form" ng-submit="controller.login()"
					ng-show="!controller.authenticated">
					<div class="form-group">
						<label for="username">Username:</label> <input type="text"
							class="form-control" id="username" name="username"
							ng-model="controller.credentials.username" />
					</div>
					<div class="form-group">
						<label for="password">Password:</label> <input type="password"
							class="form-control" id="password" name="password"
							ng-model="controller.credentials.password" />
					</div>
					<button type="submit" class="btn btn-primary">Submit</button>
				</form>
			</div>
		</div>
		<footer class="footer">
			<div class="container">
				Code licensed under <a
					href="http://www.apache.org/licenses/LICENSE-2.0">Apache Open
					Source</a>
			</div>
		</footer>
	</div>

	<script src="js/app.js" type="text/javascript"></script>
	<script type="text/javascript">
		angular.module("springBootAdmin").controller("login",
				function($http, $window) {
					var self = this;
					self.credentials = {};
					self.error = false;
					self.authenticated = false;
					self.login = function() {
						$http.post("/auth", self.credentials).then(function() {
							self.authenticated = true;
							self.error = false;
							$http.get("/update").then(function() {
								$window.location = "/";
							});
						}, function() {
							self.error = true;
							self.authenticated = false;
						})
					};
				});
	</script>
</body>
</html>
